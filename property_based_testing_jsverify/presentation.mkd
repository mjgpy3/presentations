# Property-Based Testing in JavaScript Using JSVerify
Michael Gilliland (@mjgpy3) <br />
[github.com/mjgpy3/presentations](https://github.com/mjgpy3/presentations)
---

# Agenda
 - What is Property-Based Testing?
 - Enter JSVerify
 - Examples
 - When to use it?
 - When to not use it?

---
# What is Property-Based Testing?

<img src="http://cdn.theleanleap.com/wp-content/uploads/2015/02/blind-men-elephant-600x440.gif">
</img>

---
# Let's start with a different question

### What is "normal" testing?

---
# "Normal" testing is sniper-rifle testing

<img src="http://listamaze.com/wp-content/uploads/2015/06/M21.jpeg?8fa78d">
</img>

---
# Our tests are deliberate
<img style="width: 60%" src="http://www.mccambridge.org/blog/wp-content/uploads/2010/03/IMG_2488.jpg">
</img>

---
# Sometimes we flat-out miss
<img style="width: 90%" src="http://2.bp.blogspot.com/-vcufGRGQvtk/UPTH-ynAkAI/AAAAAAAAMHc/ur9kh5KnBVI/s1600/Pulp+Fiction+(1994)+720p%5B17-17-24%5D.jpg">
</img>

---
# Property-based testing is shot-gun testing
<img src="http://i.telegraph.co.uk/multimedia/archive/02442/shotgun_2442821b.jpg">
</img>

---
# Our tests are _still_ deliberate
<img width="90%" src="https://upload.wikimedia.org/wikipedia/commons/b/b5/Shotgun_in_training_US_military.jpg">
</img>

---
# Our coverage can be greater
<img width="60%" src="http://www.b2bmarketingconsultants.com/wp-content/uploads/2013/09/target.jpg">
</img>

---
# But we can still miss!
<img style="width: 90%" src="http://2.bp.blogspot.com/-vcufGRGQvtk/UPTH-ynAkAI/AAAAAAAAMHc/ur9kh5KnBVI/s1600/Pulp+Fiction+(1994)+720p%5B17-17-24%5D.jpg">
</img>

---
# Enough with analogies, what is PBT?
<img style="width: 90%" src="http://www.mahoneylandscaping.com/images/portfolio/big/Landscaping_March_2012_033.jpg">
</img>

---
# Instead of

## Given (arrange)
> some state/setup

## When (act)
> some action

## Then (assert)
> some singular expectation

---
# ...we have...

## Given (arrange)
> some state/setup

## When (act)
> some action

## Then (assert)
> **some higher-level property**

---
# ...or even just

## When (act)
> some action

## Then (assert)
> **some higher-level property**

---
# How do we express properties?
<img src="https://next3-assets.s3.amazonaws.com/activities/175/backgrounds-1423861398-Proportion_Activity_03.gif">
</img>

---
# Predicate functions

```javascript
function examplePred(a, b, c, etc) {
  return Boolean;
}
```

---
# Examples

```javascript
function isEven(n) {
  return n % 2 === 0;
}
```

---
# Examples

```javascript
function isEven(n) {
  return n % 2 === 0;
}

console.log(isEven(42));
// true
```

---
# Examples

```javascript
function isEven(n) {
  return n % 2 === 0;
}

console.log(isEven(42));
// true

console.log(isEven(35));
// false
```

---
# Examples

```javascript
function is21OrOlder(person) {
  return person.age >= 21;
}
```

---
# Examples

```javascript
function is21OrOlder(person) {
  return person.age >= 21;
}

var littleStevie = {
  age: 7
};
```

---
# Examples

```javascript
function is21OrOlder(person) {
  return person.age >= 21;
}

var littleStevie = {
  age: 7
};

console.log(is21OrOlder(littleStevie));
// false
```

---
# Examples

```javascript
function is21OrOlder(person) {
  return person.age >= 21;
}

var littleStevie = {
  age: 7
};

console.log(is21OrOlder(littleStevie));
// false

var marshall = {
  age: 43
};
```

---
# Examples

```javascript
function is21OrOlder(person) {
  return person.age >= 21;
}

var littleStevie = {
  age: 7
};

console.log(is21OrOlder(littleStevie));
// false

var marshall = {
  age: 43
};

console.log(is21OrOlder(marshall));
// true
```
